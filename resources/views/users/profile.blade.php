<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ $user->name }}'s Profile</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.bunny.net">
    <link href="https://fonts.bunny.net/css?family=figtree:400,600,700,900&display=swap" rel="stylesheet" />
    <style>
        /* Avatars */
        .avatar-svg { width: 100%; height: 100%; }
        
        /* Themes */
        .theme-cheerful { 
            --bg-color: #fdf2f8; 
            --card-bg: #ffffff; 
            --primary: #4f46e5; 
            --accent: #fbbf24; 
            --text-main: #1f2937; 
            --btn-bg: #db2777; 
            --btn-text: #ffffff;
            --progress-bar: linear-gradient(90deg, #f472b6, #db2777);
            --font-family: 'Figtree', sans-serif;
            --avatar-border: #f472b6;
            --icon-bg: #f3f4f6; /* Light gray for icons */
            --icon-color: #db2777; /* Pink for icons */
            background-image: radial-gradient(#fbcfe8 2px, transparent 2px);
            background-size: 30px 30px;
        }

        .theme-spacy { 
            --bg-color: #1a0033; 
            --card-bg: #2d1b4e; 
            --primary: #a78bfa; 
            --accent: #f472b6; 
            --text-main: #f3f4f6; 
            --btn-bg: #8b5cf6; 
            --btn-text: #ffffff;
            --progress-bar: linear-gradient(90deg, #c084fc, #a855f7);
            --font-family: 'Figtree', sans-serif;
            --avatar-border: #d8b4fe;
            --icon-bg: rgba(45, 27, 78, 0.5); /* Dark transparent */
            --icon-color: #d8b4fe;
            background-image: url('data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%239C92AC" fill-opacity="0.15"%3E%3Cpath d="M30 10L0 30L30 50L60 30zM30 0L0 20L30 40L60 20z" /%3E%3C/g%3E%3C/g%3E%3C/svg%3E');
        }

        .theme-techy { 
            --bg-color: #0f172a; 
            --card-bg: rgba(30, 41, 59, 0.9); 
            --panel-border: 1px solid rgba(16, 185, 129, 0.3); 
            --text-main: #e2e8f0; 
            --text-accent: #10b981; 
            --btn-bg: #10b981; 
            --btn-text: #0f172a;
            --progress-bar: linear-gradient(90deg, #10b981, #059669); 
            --font-family: 'Courier New', monospace; 
            --avatar-border: #10b981;
            --icon-bg: rgba(15, 23, 42, 0.6);
            --icon-color: #10b981;
            background-image: 
                linear-gradient(rgba(15, 23, 42, 0.9), rgba(15, 23, 42, 0.9)),
                repeating-linear-gradient(0deg, transparent, transparent 1px, rgba(16, 185, 129, 0.1) 1px, rgba(16, 185, 129, 0.1) 2px);
            background-size: 100% 4px;
        }

        body { background-color: var(--bg-color); color: var(--text-main); font-family: var(--font-family); transition: background-color 0.3s ease; }
        
        .themed-card { 
            background-color: var(--card-bg); 
            color: var(--text-main); 
            border-radius: 1rem;
        }
        
        /* Specific fix for Techy border */
        .theme-techy .themed-card {
            border: var(--panel-border);
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.1);
        }

        .themed-text { color: var(--text-main); }
        
        .themed-btn {
            background-color: var(--btn-bg);
            color: var(--btn-text);
        }

        .text-accent { color: var(--text-accent); }
        .bg-accent { background: var(--progress-bar); }
        
        .avatar-container { 
            border: 4px solid var(--avatar-border); 
            box-shadow: 0 0 20px rgba(0,0,0,0.2); 
        }

        /* HUD Panel Component */
        .hud-panel {
            background-color: var(--card-bg);
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border-radius: 1rem;
        }
        .theme-techy .hud-panel {
            border: var(--panel-border);
        }
    </style>
</head>
<body class="antialiased min-h-screen theme-{{ $user->theme }}">

    @include('users.partials.user-navbar')

    <!-- Main Content -->
    <main class="pt-28 pb-16">
        <div class="container mx-auto px-4 max-w-6xl">
            
            <!-- Success Message -->
            @if(session('success'))
                <div class="hud-panel p-4 mb-8 text-center bg-opacity-90">
                    <p class="text-green-500 font-bold tracking-wide">{{ session('success') }}</p>
                </div>
            @endif

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

                <!-- Left Column: Player Stats -->
                <div class="lg:col-span-1 space-y-8">
                    
                    <!-- Player Identity Card -->
                    <div class="themed-card p-6 rounded-lg shadow-xl text-center relative overflow-hidden group">
                        <!-- Decorative bg glow -->
                        <div class="absolute top-0 left-0 w-full h-2 bg-accent"></div>
                        
                        <!-- Avatar -->
                        <div class="avatar-container w-32 h-32 rounded-full mx-auto mb-6 flex items-center justify-center overflow-hidden relative" style="background-color: var(--icon-bg); color: var(--icon-color);">
                             @php
                                $avatars = [
                                    'cat' => '<svg width="800px" height="800px"  viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M12.0196 14.9374C11.7284 14.9374 11.4307 14.9818 11.1784 15.0796C11.0546 15.1275 10.9032 15.2031 10.7699 15.3252C10.6361 15.4479 10.4632 15.6749 10.4632 15.9999C10.4632 16.3249 10.6361 16.5519 10.7699 16.6745C10.9032 16.7967 11.0546 16.8722 11.1784 16.9202C11.4307 17.018 11.7284 17.0624 12.0196 17.0624C12.3109 17.0624 12.6085 17.018 12.8609 16.9202C12.9846 16.8722 13.136 16.7967 13.2693 16.6745C13.4032 16.5519 13.5761 16.3249 13.5761 15.9999C13.5761 15.6749 13.4032 15.4479 13.2693 15.3252C13.136 15.2031 12.9846 15.1275 12.8609 15.0796C12.6085 14.9818 12.3109 14.9374 12.0196 14.9374Z" fill="currentColor"/>
                                                <path d="M14.0365 12.6464C14.2015 12.38 14.5274 12.0625 15.0163 12.0625C15.5051 12.0625 15.831 12.38 15.996 12.6464C16.1681 12.9243 16.2501 13.2612 16.2501 13.5938C16.2501 13.9263 16.1681 14.2632 15.996 14.5411C15.831 14.8075 15.5051 15.125 15.0163 15.125C14.5274 15.125 14.2015 14.8075 14.0365 14.5411C13.8644 14.2632 13.7824 13.9263 13.7824 13.5938C13.7824 13.2612 13.8644 12.9243 14.0365 12.6464Z" fill="currentColor"/>
                                                <path d="M9.01634 12.0625C8.52751 12.0625 8.20161 12.38 8.03658 12.6464C7.86445 12.9243 7.78247 13.2612 7.78247 13.5938C7.78247 13.9263 7.86445 14.2632 8.03658 14.5411C8.20161 14.8075 8.52751 15.125 9.01634 15.125C9.50518 15.125 9.83108 14.8075 9.9961 14.5411C10.1682 14.2632 10.2502 13.9263 10.2502 13.5938C10.2502 13.2612 10.1682 12.9243 9.9961 12.6464C9.83108 12.38 9.50518 12.0625 9.01634 12.0625Z" fill="currentColor"/>
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M6.09485 4.25C5.48148 4.25 4.77463 4.42871 4.20882 4.91616C3.62226 5.4215 3.27004 6.18781 3.27004 7.1875V9.0625L3.27005 9.06545C3.2712 9.35941 3.3211 9.94757 3.4888 10.4392C3.54365 10.6001 3.63129 10.8134 3.77764 11.0058C3.49364 11.5688 3.35904 12.1495 3.29787 12.7095C3.2468 13.1771 3.24611 13.6679 3.25424 14.1211C2.5932 14.3507 1.90877 14.6349 1.5932 14.8387C1.24524 15.0634 1.14534 15.5277 1.37006 15.8756C1.59478 16.2236 2.05903 16.3235 2.40698 16.0988C2.5234 16.0236 2.86686 15.8664 3.31867 15.6939C3.38755 16.173 3.52716 16.6095 3.7221 17.0063C3.56621 17.1035 3.42847 17.1935 3.31889 17.2652C3.27694 17.2926 3.23912 17.3173 3.20599 17.3387C2.85803 17.5634 2.75813 18.0277 2.98285 18.3756C3.20757 18.7236 3.67182 18.8235 4.01978 18.5988C4.0609 18.5722 4.10473 18.5436 4.15098 18.5134C4.28216 18.4278 4.43287 18.3294 4.59701 18.2288C5.18653 18.8313 5.91865 19.2964 6.67916 19.6462C8.45998 20.4654 10.569 20.75 12.0001 20.75C13.4311 20.75 15.5402 20.4654 17.321 19.6462C18.0815 19.2964 18.8136 18.8313 19.4031 18.2288C19.5673 18.3294 19.718 18.4278 19.8491 18.5134C19.8954 18.5436 19.9392 18.5722 19.9803 18.5988C20.3283 18.8235 20.7925 18.7236 21.0173 18.3756C21.242 18.0277 21.1421 17.5634 20.7941 17.3387C20.761 17.3173 20.7232 17.2926 20.6812 17.2652C20.5716 17.1935 20.4339 17.1035 20.2781 17.0063C20.473 16.6095 20.6127 16.173 20.6815 15.6938C21.1335 15.8663 21.4771 16.0236 21.5936 16.0988C21.9415 16.3235 22.4058 16.2236 22.6305 15.8756C22.8552 15.5277 22.7553 15.0634 22.4074 14.8387C22.0917 14.6349 21.4071 14.3506 20.7459 14.121C20.7541 13.6678 20.7534 13.177 20.7023 12.7095C20.6412 12.1495 20.5065 11.5688 20.2225 11.0058C20.3689 10.8134 20.4565 10.6001 20.5114 10.4392C20.6791 9.94758 20.729 9.35941 20.7301 9.06545L20.7302 9.0625V7.18761C20.7302 6.18792 20.3779 5.42162 19.7914 4.91628C19.2256 4.42882 18.5187 4.25011 17.9054 4.25011C17.4969 4.25011 17.0744 4.40685 16.7337 4.56076C16.3726 4.72392 15.9952 4.9359 15.6558 5.13136C15.5828 5.17339 15.5119 5.21444 15.443 5.25432L15.441 5.25548C15.177 5.4084 14.9427 5.5441 14.7339 5.65167C14.6042 5.7185 14.5035 5.7643 14.4285 5.79206C14.3969 5.80377 14.3767 5.80966 14.3663 5.81242C14.1129 5.81102 13.9514 5.79033 13.7181 5.76044C13.6681 5.75403 13.6147 5.74719 13.5564 5.74003C13.2098 5.69743 12.7722 5.65636 12.0001 5.65636C11.228 5.65636 10.7905 5.69743 10.4438 5.74003C10.3855 5.74719 10.3322 5.75403 10.2821 5.76044C10.0489 5.79033 9.88738 5.81102 9.63388 5.81242C9.62352 5.80966 9.60332 5.80376 9.57174 5.79206C9.49678 5.7643 9.39604 5.71849 9.26633 5.65166C9.05755 5.54408 8.82331 5.40842 8.55926 5.25548C8.48975 5.21523 8.41818 5.17377 8.34446 5.13132C8.00502 4.93584 7.62764 4.72384 7.26652 4.56067C6.92587 4.40675 6.50329 4.25 6.09485 4.25ZM6.16192 17.6138C6.49595 17.8657 6.8808 18.0879 7.30604 18.2835C8.83694 18.9877 10.7179 19.25 12.0001 19.25C13.2823 19.25 15.1632 18.9877 16.6941 18.2835C17.1194 18.0879 17.5042 17.8657 17.8382 17.6138C17.4858 17.5524 17.2179 17.245 17.2179 16.875C17.2179 16.4608 17.5537 16.125 17.9679 16.125C18.2951 16.125 18.6295 16.2068 18.9399 16.3204C19.0985 15.9885 19.1959 15.625 19.2226 15.2271C18.9249 15.1544 18.7193 15.125 18.6134 15.125C18.1992 15.125 17.8634 14.7892 17.8634 14.375C17.8634 13.9608 18.1992 13.625 18.6134 13.625C18.8081 13.625 19.0284 13.6542 19.2504 13.6974C19.2505 13.4213 19.2415 13.1502 19.2112 12.8724C19.1407 12.227 18.958 11.6541 18.5269 11.1447C18.3727 10.9625 18.1809 10.7813 17.9402 10.6045C17.6063 10.3594 17.5344 9.88999 17.7796 9.55611C18.0247 9.22224 18.4941 9.15031 18.828 9.39546C18.9471 9.48292 19.0597 9.57282 19.1659 9.66506C19.2099 9.43686 19.2295 9.19817 19.2302 9.06087V7.18761C19.2302 6.56231 19.0238 6.23486 18.8123 6.0527C18.5801 5.85266 18.2496 5.75011 17.9054 5.75011C17.835 5.75011 17.659 5.78868 17.3513 5.92771C17.064 6.0575 16.7432 6.23612 16.4043 6.43125C16.3407 6.4679 16.2759 6.50544 16.2106 6.54328C15.9428 6.69843 15.666 6.85883 15.4209 6.98509C15.2663 7.06473 15.1052 7.14099 14.9495 7.19867C14.8058 7.25192 14.607 7.3125 14.3941 7.3125C14.0223 7.3125 13.7617 7.27877 13.5115 7.2464C13.4654 7.24043 13.4196 7.23449 13.3735 7.22883C13.0848 7.19336 12.7084 7.15636 12.0001 7.15636C11.2919 7.15636 10.9154 7.19336 10.6267 7.22883C10.5807 7.23449 10.5349 7.24042 10.4887 7.24639C10.2386 7.27877 9.97796 7.3125 9.6061 7.3125C9.39326 7.3125 9.19445 7.25191 9.05069 7.19866C8.89497 7.14098 8.73386 7.06471 8.57928 6.98506C8.33423 6.8588 8.05742 6.69839 7.78968 6.54325C7.72435 6.50539 7.65955 6.46784 7.59589 6.43118C7.25702 6.23603 6.93614 6.05741 6.64888 5.92761C6.34115 5.78856 6.16522 5.75 6.09485 5.75C5.75062 5.75 5.42007 5.85254 5.18787 6.05259C4.97643 6.23475 4.77004 6.56219 4.77004 7.1875V9.06088C4.7707 9.19819 4.79025 9.43686 4.83425 9.66506C4.94053 9.57281 5.05309 9.48292 5.1722 9.39546C5.50608 9.15031 5.97547 9.22224 6.22062 9.55612C6.46577 9.88999 6.39385 10.3594 6.05997 10.6045C5.81926 10.7813 5.62748 10.9625 5.47331 11.1447C5.04223 11.6541 4.85949 12.227 4.789 12.8724C4.75865 13.1502 4.74966 13.4213 4.74975 13.6975C4.97192 13.6543 5.19231 13.625 5.38719 13.625C5.80141 13.625 6.13719 13.9608 6.13719 14.375C6.13719 14.7892 5.80141 15.125 5.38719 15.125C5.28121 15.125 5.07549 15.1544 4.77758 15.2271C4.80434 15.625 4.90168 15.9885 5.06027 16.3203C5.37069 16.2068 5.70504 16.125 6.03224 16.125C6.44646 16.125 6.78224 16.4608 6.78224 16.875C6.78224 17.245 6.51433 17.5524 6.16192 17.6138Z" fill="currentColor"/>
                                                </svg>',
                                    'dog' => '<svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M3.15452 1.01195C5.11987 1.32041 7.17569 2.2474 8.72607 3.49603C9.75381 3.17407 10.8558 2.99995 12 2.99995C13.1519 2.99995 14.261 3.17641 15.2946 3.5025C16.882 2.27488 18.8427 1.31337 20.8354 1.01339C21.2596 0.95092 21.7008 1.16534 21.8945 1.55273C22.6719 3.38958 22.6983 5.57987 22.2202 7.49248L22.2128 7.52213C22.0847 8.03536 21.9191 8.69868 21.3876 8.92182C21.7827 9.89315 22 10.9466 22 12.0526C22 14.825 20.8618 17.6774 19.8412 20.2348L19.8412 20.2348L19.7379 20.4936C19.1182 22.0486 17.7316 23.1196 16.125 23.418L13.8549 23.8397C13.1549 23.9697 12.4562 23.7172 12 23.2082C11.5438 23.7172 10.8452 23.9697 10.1452 23.8397L7.87506 23.418C6.26852 23.1196 4.88189 22.0486 4.26214 20.4936L4.15891 20.2348C3.13833 17.6774 2.00004 14.825 2.00004 12.0526C2.00004 10.9466 2.21737 9.89315 2.6125 8.92182C2.08046 8.69845 1.91916 8.05124 1.7909 7.53658L1.7799 7.49248C1.32311 5.66527 1.23531 3.2968 2.10561 1.55273C2.29827 1.16741 2.72906 0.945855 3.15452 1.01195ZM6.58478 4.44052C5.45516 5.10067 4.47474 5.9652 3.71373 6.98132C3.41572 5.76461 3.41236 4.41153 3.67496 3.18754C4.68842 3.48029 5.68018 3.89536 6.58478 4.44052ZM20.2863 6.98133C19.5303 5.97184 18.5577 5.11195 17.4374 4.45347C18.3364 3.9005 19.3043 3.45749 20.3223 3.17455C20.5884 4.40199 20.5853 5.76068 20.2863 6.98133ZM8.85364 5.56694C9.81678 5.20285 10.8797 4.99995 12 4.99995C13.1204 4.99995 14.1833 5.20285 15.1464 5.56694C18.0554 6.66661 20 9.1982 20 12.0526C20 14.4676 18.9891 16.9876 18.0863 19.238L18.0862 19.2382C18.0167 19.4115 17.9478 19.5832 17.8801 19.7531C17.5291 20.6338 16.731 21.2712 15.7597 21.4516L13.4896 21.8733L12.912 20.5896C12.7505 20.2307 12.3935 19.9999 12 19.9999C11.6065 19.9999 11.2496 20.2307 11.0881 20.5896L10.5104 21.8733L8.24033 21.4516C7.26908 21.2712 6.471 20.6338 6.12001 19.7531C6.05237 19.5834 5.98357 19.4119 5.91414 19.2388L5.91395 19.2384L5.91381 19.238C5.01102 16.9876 4.00004 14.4676 4.00004 12.0526C4.00004 9.1982 5.94472 6.66661 8.85364 5.56694ZM10.5 15.9999C10.1212 15.9999 9.77497 16.2139 9.60557 16.5527C9.43618 16.8915 9.47274 17.2969 9.7 17.5999L11.2 19.5999C11.3889 19.8517 11.6852 19.9999 12 19.9999C12.3148 19.9999 12.6111 19.8517 12.8 19.5999L14.3 17.5999C14.5273 17.2969 14.5638 16.8915 14.3944 16.5527C14.225 16.2139 13.8788 15.9999 13.5 15.9999H10.5ZM9.62134 11.1212C9.62134 11.9497 8.94977 12.6212 8.12134 12.6212C7.29291 12.6212 6.62134 11.9497 6.62134 11.1212C6.62134 10.2928 7.29291 9.62125 8.12134 9.62125C8.94977 9.62125 9.62134 10.2928 9.62134 11.1212ZM16 12.4999C16.8284 12.4999 17.5 11.8284 17.5 10.9999C17.5 10.1715 16.8284 9.49994 16 9.49994C15.1716 9.49994 14.5 10.1715 14.5 10.9999C14.5 11.8284 15.1716 12.4999 16 12.4999Z" fill="currentColor"/>
                                                </svg>',
                                    'panda' => '<svg height="800px" width="800px" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	                                            viewBox="0 0 512 512"  xml:space="preserve">
                                                <style type="text/css">.st0{fill:currentColor;}</style>
                                                <g>
	                                            <path class="st0" d="M311.24,229.136c-17.193,15.049-12.591,57.366,24.613,80.394c34.457,21.334,78.759-27.891,47.591-59.07
		                                            C356.255,223.272,337.496,206.159,311.24,229.136z"/>
	                                            <path class="st0" d="M200.76,229.136c-26.256-22.978-45.015-5.864-72.203,21.324c-31.169,31.179,13.133,80.404,47.59,59.07
		                                            C213.352,286.502,217.954,244.185,200.76,229.136z"/>
	                                            <path class="st0" d="M512,92.7c0-43.09-34.929-78.018-78.028-78.018c-39.651,0-72.384,29.595-77.347,67.903
		                                            c-13.304-5.034-26.688-8.131-39.61-9.976c-19.299-2.768-37.686-2.907-53.746-2.918c-2.486,0-4.913,0.01-7.268,0.01
		                                            c-2.347,0-4.773-0.01-7.27-0.01c-14.276,0.01-30.386,0.13-47.35,2.085c-12.712,1.474-25.925,3.99-39.169,8.351
		                                            c-2.276,0.742-4.561,1.564-6.837,2.426c-4.983-38.296-37.706-67.872-77.346-67.872C34.929,14.682,0,49.611,0,92.7
		                                            c0,38.849,28.372,71.04,65.517,77.016c-2.537,5.272-5.013,10.706-7.318,16.502c-26.528,66.358-34.558,115.573-34.558,150.171
		                                            c0,11.93,0.962,22.126,2.456,30.688c1.504,8.562,3.539,15.479,5.785,20.993c6.126,15.029,15.72,26.968,26.507,36.212
		                                            c16.212,13.895,35.01,22.137,51.17,28.082c8.08,2.958,15.53,5.323,21.605,7.348c3.028,1.003,5.705,1.925,7.87,2.757
		                                            c2.165,0.821,3.829,1.574,4.692,2.055c3.85,2.085,9.043,5.283,15.46,8.822c9.624,5.334,22.086,11.429,38.006,16.081
		                                            c15.91,4.672,35.28,7.901,58.81,7.891c31.369,0.019,55.35-5.764,73.596-12.933c9.124-3.579,16.802-7.479,23.219-11.038
		                                            c6.406-3.538,11.6-6.736,15.46-8.822c1.153-0.642,3.709-1.745,7.018-2.907c5.834-2.106,14.015-4.612,23.168-7.821
		                                            c13.745-4.852,29.786-11.328,44.733-21.534c7.47-5.114,14.658-11.168,21.024-18.487c6.366-7.298,11.88-15.86,15.9-25.705
		                                            c2.246-5.504,4.281-12.431,5.785-20.993c1.504-8.562,2.456-18.758,2.456-30.699c-0.009-34.587-8.03-83.812-34.558-150.16
		                                            c-2.306-5.795-4.761-11.248-7.298-16.502C483.638,163.721,512,131.539,512,92.7z M459.687,336.378
		                                            c0,10.407-0.832,18.948-2.026,25.745c-1.182,6.788-2.737,11.831-4.08,15.098c-4.22,10.287-10.637,18.407-18.648,25.324
		                                            c-11.98,10.326-27.62,17.545-42.337,22.898c-7.358,2.687-14.456,4.943-20.822,7.068c-3.198,1.063-6.206,2.096-9.044,3.178
		                                            c-2.847,1.092-5.514,2.216-8.15,3.64c-4.922,2.696-9.896,5.764-15.639,8.932c-8.583,4.752-18.828,9.744-32.182,13.654
		                                            c-13.344,3.91-29.816,6.728-50.758,6.738c-27.931-0.021-47.882-4.992-63.131-10.958c-7.629-2.998-14.085-6.266-19.81-9.434
		                                            c-5.745-3.168-10.718-6.237-15.64-8.932c-3.509-1.885-7.098-3.279-11.048-4.703c-6.877-2.466-14.827-4.881-23.309-7.87
		                                            c-12.702-4.461-26.446-10.176-38.067-18.156c-5.825-3.97-11.108-8.492-15.599-13.655c-4.491-5.163-8.211-10.948-10.978-17.726
		                                            c-1.344-3.268-2.898-8.31-4.08-15.098c-1.193-6.797-2.035-15.338-2.026-25.735c-0.009-30.146,7.038-75.853,32.502-139.534
		                                            c9.966-24.933,21.826-43.17,34.598-56.714c9.584-10.166,19.71-17.725,30.226-23.5c15.76-8.642,32.513-13.233,49.416-15.66
		                                            c16.883-2.426,33.836-2.626,49.676-2.626c2.437,0,4.863,0.02,7.27,0.02c2.396,0,4.822-0.02,7.268-0.02
		                                            c14.076,0,29.034,0.16,44.052,1.904c11.258,1.304,22.537,3.49,33.514,7.098c16.472,5.434,32.272,13.956,46.919,27.911
		                                            c14.627,13.975,28.212,33.546,39.431,61.586C452.649,260.527,459.698,306.242,459.687,336.378z"/>
	                                            <path class="st0" d="M312.334,364.911c-6.176,7.138-14.086,10.647-21.575,10.647c-6.688-0.04-13.123-2.647-18.538-8.752
		                                            c-3.94-4.481-7.318-11.038-9.213-20c13.775-2.326,24.041-11.319,24.041-22.086c0-12.532-13.895-22.688-31.048-22.688
		                                            c-17.154,0-31.059,10.156-31.059,22.688c0,9.976,8.832,18.437,21.094,21.475c-1.785,9.374-5.093,16.171-8.934,20.753
		                                            c-2.546,3.057-5.343,5.173-8.24,6.566c-2.888,1.384-5.905,2.045-8.972,2.045c-6.877,0-14.246-3.379-20.111-10.506
		                                            c-2.506-3.068-7.028-3.509-10.086-1.003c-3.058,2.507-3.509,7.018-1.003,10.086c8.2,10.025,19.56,15.759,31.2,15.759
		                                            c5.163,0,10.346-1.142,15.168-3.458c7.249-3.459,13.604-9.544,18.196-17.855c0.471-0.843,0.912-1.725,1.343-2.617
		                                            c1.965,3.859,4.241,7.328,6.868,10.316c7.91,9.042,18.637,13.654,29.294,13.603c11.991,0.01,23.801-5.604,32.432-15.609
		                                            c2.577-2.998,2.245-7.519-0.752-10.105C319.441,361.583,314.92,361.913,312.334,364.911z"/></g>
                                                </svg>',
                                    'fox' => '<svg fill="currentColor" width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M2.514,17.874l9,5c.021.011.043.016.064.026s.051.021.078.031a.892.892,0,0,0,.688,0c.027-.01.052-.019.078-.031s.043-.015.064-.026l9-5A1,1,0,0,0,22,16.9L21,7V2a1,1,0,0,0-1.625-.781L14.649,5h-5.3L4.625,1.219A1,1,0,0,0,3,2l0,4.9-1,10A1,1,0,0,0,2.514,17.874ZM5,7V4.081l3.375,2.7A1,1,0,0,0,9,7h6a1,1,0,0,0,.625-.219L19,4.079l0,3.021.934,9.345L13,20.3V17.333l1.42-.946A1.3,1.3,0,0,0,15,15.3h0A1.3,1.3,0,0,0,13.7,14H10.3A1.3,1.3,0,0,0,9,15.3H9a1.3,1.3,0,0,0,.58,1.084l1.42.946V20.3L4.06,16.445Zm3.5,6a2,2,0,1,1,2-2A2,2,0,0,1,8.5,13Zm5-2a2,2,0,1,1,2,2A2,2,0,0,1,13.5,11Z"/></svg>',
                                    'rabbit' => '<svg height="800px" width="800px" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
	                                            viewBox="0 0 512 512"  xml:space="preserve">
                                                <style type="text/css">.st0{fill:currentColor;}</style><g>
	                                            <path class="st0" d="M197.336,71.465c0-7.21-5.89-13.099-13.099-13.099c-7.246,0-13.098,5.89-13.098,13.099v108.888
		                                            c8.331-4.813,17.088-8.902,26.197-12.249V71.465z"/>
		                                        <path class="st0" d="M340.852,71.465c0-7.21-5.898-13.099-13.098-13.099c-7.246,0-13.099,5.89-13.099,13.099v96.639
		                                            c9.1,3.347,17.866,7.436,26.197,12.249V71.465z"/>
		                                        <path class="st0" d="M389.701,201.9V61.939c0-17.061-6.957-32.63-18.147-43.792C360.682,7.255,345.629,0.425,329.101,0.072
		                                            c-0.408-0.044-0.86-0.063-1.348-0.072c-17.061-0.008-32.63,6.957-43.801,18.147c-11.182,11.163-18.146,26.732-18.137,43.792v82.555
		                                            c-3.248-0.182-6.514-0.308-9.815-0.308c-3.311,0-6.568,0.126-9.815,0.308V61.939c0.009-17.061-6.957-32.63-18.138-43.802
		                                            C217.174,7.247,202.103,0.417,185.576,0.064c-0.371-0.036-0.786-0.055-1.238-0.055c-0.028,0-0.055-0.009-0.091-0.009
		                                            c0,0,0,0-0.01,0c-17.052-0.008-32.628,6.957-43.792,18.138c-11.182,11.172-18.146,26.741-18.146,43.802v139.952
		                                            c-31.083,32.9-50.215,77.362-50.206,126.202c-0.01,50.739,20.607,96.802,53.86,130.038C159.188,491.393,205.252,512,255.982,512
		                                            H256c50.73,0.009,96.793-20.607,130.028-53.861c33.262-33.234,53.878-79.298,53.878-130.037
		                                            C439.907,279.262,420.774,234.801,389.701,201.9z M366.887,438.99c-28.423,28.404-67.538,45.927-110.887,45.935h-0.009
		                                            c-43.349-0.008-82.473-17.54-110.896-45.945c-28.395-28.423-45.918-67.538-45.927-110.887
		                                            c0.009-43.494,17.649-82.718,46.217-111.168l3.998-3.971V61.939c0-9.671,3.881-18.3,10.204-24.651
		                                            c6.35-6.332,14.98-10.203,24.65-10.212h0.01c9.67,0.009,18.3,3.88,24.65,10.212c6.332,6.351,10.204,14.98,10.213,24.651v112.949
		                                         	l15.378-2.117c7.084-0.968,14.248-1.502,21.512-1.502c7.255,0,14.428,0.534,21.512,1.502l15.378,2.117V61.939
		                                            c0.009-9.661,3.89-18.3,10.213-24.651c6.342-6.314,14.944-10.186,24.587-10.203h0.064c9.679,0.008,18.309,3.88,24.66,10.213
		                                            c6.332,6.341,10.204,14.98,10.204,24.642v151.024l3.988,3.971c28.558,28.441,46.208,67.665,46.217,111.168
		                                            C412.814,371.45,395.292,410.566,366.887,438.99z"/>
		                                        <path class="st0" d="M202.953,307.957c0-9.625-7.807-17.423-17.422-17.423c-9.626,0-17.432,7.798-17.432,17.423
		                                            c0,9.624,7.807,17.422,17.432,17.422C195.146,325.379,202.953,317.581,202.953,307.957z"/>
		                                        <path class="st0" d="M326.469,290.534c-9.626,0-17.423,7.798-17.423,17.423c0,9.624,7.798,17.422,17.423,17.422
		                                            c9.625,0,17.423-7.798,17.423-17.422C343.892,298.332,336.094,290.534,326.469,290.534z"/>
		                                        <path class="st0" d="M307.888,365.327c-3.736,0-6.766,3.031-6.766,6.766c0,5.319-2.135,10.078-5.618,13.569
		                                            c-3.491,3.474-8.24,5.609-13.559,5.618c-5.32-0.01-10.068-2.144-13.57-5.618c-2.46-2.479-4.233-5.608-5.066-9.1
		                                            c10.113-3.121,17.468-12.547,17.468-23.682c0-13.687-11.1-24.786-24.777-24.786c-13.696,0-24.786,11.099-24.786,24.786
		                                            c0,11.135,7.354,20.562,17.477,23.682c-0.832,3.492-2.614,6.621-5.084,9.1c-3.492,3.474-8.25,5.609-13.56,5.618
		                                            c-5.319-0.01-10.068-2.144-13.56-5.618c-3.483-3.491-5.618-8.25-5.627-13.569c0-3.736-3.021-6.766-6.766-6.766
		                                            	c-3.737,0-6.767,3.031-6.767,6.766c0,18.074,14.646,32.72,32.72,32.72c10.584,0,19.965-5.048,25.954-12.845
		                                            c5.97,7.798,15.36,12.845,25.944,12.845c18.073,0,32.71-14.645,32.72-32.72C314.664,368.358,311.633,365.327,307.888,365.327z"/></g>
                                                </svg>',
                                    'lion' => '<svg height="800px" width="800px" version="1.1" id="_x32_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"  xml:space="preserve">
                                                <style type="text/css">.st0{fill:currentColor;}</style><g>
			                                    <path class="st0" d="M475.361,255.573c-1.705-2.996-1.697-6.572,0.032-9.56c1.737-2.988,4.964-4.996,8.645-5.403l18.029-1.975
			                                    	c3.705-0.406,6.948-2.454,8.661-5.466c1.721-3.035,1.697-6.629-0.08-9.616c0,0-65.292-114.919-89.91-152.397
			                                    	C391.921,27.28,371.293,22.611,313.65,22.611h-57.643h-57.651c-57.651,0-78.262,4.669-107.088,48.544
			                                    	C66.65,108.634,1.351,223.553,1.351,223.553c-1.777,2.988-1.8,6.582-0.072,9.616c1.714,3.012,4.956,5.06,8.66,5.466l18.03,1.975
			                                    	c3.681,0.406,6.908,2.414,8.645,5.403c1.729,2.988,1.744,6.564,0.032,9.56L1.287,317.431c-1.737,3.043-1.697,6.668,0.104,9.688
			                                    	c1.809,3.011,5.139,4.995,8.884,5.306l37.558,3.107c3.186,0.271,6.119,1.777,8.031,4.119c1.92,2.35,2.637,5.33,2,8.198
			                                    	l-10.812,48.074c-0.702,3.075,0.175,6.27,2.39,8.668c2.215,2.414,5.505,3.76,8.964,3.68l50.838-1.259
			                                    	c5.673-0.136,10.589,3.586,11.465,8.693l6.605,38.585c0.502,2.932,2.358,5.513,5.114,7.106c2.741,1.586,6.119,2.008,9.218,1.172
	                                            	l50.616-13.56c3.697-0.996,7.72-0.191,10.621,2.127l44.696,35.725c2.414,1.928,5.474,2.725,8.429,2.486
	                                            	c2.948,0.239,6.007-0.557,8.421-2.486l44.696-35.725c2.9-2.318,6.908-3.123,10.621-2.127l50.616,13.56
	                                            	c3.1,0.836,6.477,0.414,9.218-1.172c2.757-1.593,4.613-4.174,5.115-7.106l6.596-38.585c0.893-5.107,5.8-8.828,11.474-8.693
	                                            	l50.838,1.259c3.45,0.08,6.749-1.266,8.956-3.68c2.207-2.398,3.098-5.593,2.398-8.668l-10.812-48.074
	                                            	c-0.637-2.868,0.08-5.848,2-8.198c1.904-2.342,4.836-3.848,8.031-4.119l37.558-3.107c3.744-0.311,7.075-2.295,8.884-5.306
	                                            	c1.809-3.02,1.84-6.645,0.104-9.688L475.361,255.573z M109.594,148.804c0,0-32.634-19.177-18.022-44.744
	                                            	c15.21-26.626,48.075-11.194,48.075-11.194L109.594,148.804z M329.784,365.362c-1.72,7.664-8.588,19.169-22.324,19.169
	                                            	c-8.812,0-30.323,0-44.624,0c0,0-5.761,0-13.736,0c-14.301,0-35.82,0-44.641,0c-13.727,0-20.603-11.505-22.316-19.169
	                                            	c-0.709-3.163-3.458-11.082-6.438-19.312c19.607,1.131,45.278-1.809,78.756-12.597c29.152,9.386,52.409,12.859,70.885,12.859
	                                            	c3.88,0,7.489-0.207,10.955-0.486C333.289,354.128,330.493,362.175,329.784,365.362z M375.365,184.912l-12.876,25.129
		                                            c0,0,3.578,45.995,6.446,75.402c2.478,25.415-13.194,63.491-102.522,29.216c2.254-1.067,4.35-2.422,5.99-4.151l18.835-19.974
	                                            	c4.709-4.987,5.505-11.696,2.056-17.305c-0.342-0.558-0.749-1.075-1.155-1.578l-8.023-25.543c-0.406-1.29-1.777-2.12-3.227-1.928
	                                            	c-1.434,0.192-2.502,1.339-2.502,2.693v17.44c-1.115-0.144-2.254-0.247-3.401-0.247h-18.851h-18.858
	                                            	c-1.785,0-3.554,0.216-5.243,0.574v-17.768c0-1.354-1.052-2.501-2.494-2.693c-1.442-0.191-2.82,0.638-3.227,1.928l-9.728,30.952
	                                            	l0.861-0.334c-1.402,4.741-0.183,9.824,3.561,13.807l18.859,19.974c1.617,1.697,3.649,3.036,5.88,4.104
	                                            	c-89.465,34.354-105.16-3.745-102.674-29.168c2.868-29.407,6.445-75.402,6.445-75.402l-12.875-25.129
	                                            	c-11.592-15.735-13.624-22.698-7.736-34.474l17.822-36.394c7.106-14.23,25.208-21.679,42.338-17.44l66.941,28.227l66.933-28.227
	                                            	c17.13-4.239,35.223,3.21,42.337,17.44l17.815,36.394C388.997,162.214,386.957,169.177,375.365,184.912z M402.413,148.804
	                                            	l-30.052-55.938c0,0,32.865-15.432,48.074,11.194C435.031,129.627,402.413,148.804,402.413,148.804z"/>
	                                            <path class="st0" d="M196.381,190.553c-8.804,0-15.959,6.645-15.959,14.851c0,8.198,7.155,14.844,15.959,14.844
	                                            	c8.812,0,15.958-6.645,15.958-14.844C212.339,197.198,205.193,190.553,196.381,190.553z"/>
	                                            <path class="st0" d="M315.618,190.553c-8.812,0-15.95,6.645-15.95,14.851c0,8.198,7.139,14.844,15.95,14.844
	                                            	c8.812,0,15.959-6.645,15.959-14.844C331.577,197.198,324.43,190.553,315.618,190.553z"/></g>
                                                </svg>',
                                ];
                             @endphp

                             @if(array_key_exists($user->avatar, $avatars))
                                {!! $avatars[$user->avatar] !!}
                             @else
                                <span class="text-4xl font-bold" style="color: var(--icon-color);">{{ strtoupper(substr($user->name, 0, 1)) }}</span>
                             @endif
                        </div>
                        
                        <h1 class="text-3xl font-bold themed-text">{{ $user->name }}</h1>
                        <p class="text-gray-500 mb-4 font-mono text-sm">{{ $user->email }}</p>
                        
                        <div class="mt-6">
                            <a href="{{ route('profile.edit') }}" class="inline-block themed-btn px-8 py-2 rounded-full font-bold hover:opacity-90 transition-all shadow-lg transform hover:scale-105">
                                Edit Profile
                            </a>
                        </div>
                    </div>

                    <!-- Core Stats -->
                    <div class="themed-card p-6 rounded-lg shadow-xl">
                        <h2 class="text-xl font-bold themed-text mb-4 text-center uppercase tracking-widest opacity-80">Stats</h2>
                        <div class="grid grid-cols-2 gap-6 text-center">
                            <div>
                                <span class="text-xs font-bold text-gray-500 uppercase tracking-wider block mb-1">XP</span>
                                <p class="text-3xl font-black text-accent">{{ number_format($user->exptotal) }}</p>
                            </div>
                            <div>
                                <span class="text-xs font-bold text-gray-500 uppercase tracking-wider block mb-1">Rank</span>
                                <p class="text-3xl font-black themed-text">#{{ $leaderboardRank }}</p>
                            </div>
                        </div>
                    </div>
                    
                     <!-- Token Card -->
                    <div class="themed-card p-6 border-l-4 border-red-500">
                        <h3 class="text-xs font-bold uppercase tracking-widest mb-2 opacity-60 themed-text">Security Token</h3>
                        <div class="bg-black/10 p-3 rounded text-center font-mono text-xl tracking-[0.2em] text-red-500 font-bold select-all">
                            {{ $user->reset_token ?? '----' }}
                        </div>
                    </div>

                </div>

                <!-- Right Column: Progress & Achievements -->
                <div class="lg:col-span-2 space-y-8">

                    <!-- Course Progress -->
                    <div class="themed-card p-6 rounded-lg shadow-xl">
                        <h2 class="text-xl font-bold themed-text mb-6 uppercase tracking-widest opacity-80">Course Mastery</h2>
                        <div class="space-y-6">
                            @forelse ($courseProgress as $course)
                                <div>
                                    <div class="flex justify-between items-center mb-2">
                                        <span class="text-lg font-medium themed-text">{{ $course['name'] }}</span>
                                        
                                        <div class="flex items-center gap-4">
                                            <span class="font-mono font-bold text-accent">{{ $course['progress'] }}%</span>
                                            
                                            <!-- Reset Button -->
                                            <form action="{{ route('profile.reset_course') }}" method="POST" onsubmit="return confirm('WARNING: This will wipe all progress for {{ $course['name'] }}. Confirm?');">
                                                @csrf
                                                <input type="hidden" name="course_id" value="{{ $course['id'] }}">
                                                <button type="submit" class="text-[10px] uppercase font-bold text-red-400 hover:text-red-500 tracking-wider border border-red-400/30 px-2 py-0.5 rounded hover:bg-red-400/10 transition-colors">
                                                    Reset
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="w-full bg-gray-500/20 rounded-full h-4 overflow-hidden">
                                        <div class="bg-accent h-full rounded-full relative" style="width: {{ $course['progress'] }}%"></div>
                                    </div>
                                </div>
                            @empty
                                <div class="text-center py-8 opacity-60 border-2 border-dashed border-gray-500/30 rounded-lg">
                                    <p class="themed-text">No courses started.</p>
                                    <a href="{{ route('courses.index') }}" class="text-accent hover:underline font-bold mt-2 inline-block">Start Training</a>
                                </div>
                            @endforelse
                        </div>
                    </div>

                    <!-- Achievements -->
                    <div class="themed-card p-6 rounded-lg shadow-xl">
                        <h2 class="text-xl font-bold themed-text mb-6 uppercase tracking-widest opacity-80">Achievements</h2>
                        <div class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 gap-4">
                            @foreach ($achievements as $ach)
                                <div class="text-center group relative">
                                    <!-- Use dynamic color/style from theme for icon container -->
                                    <div class="w-16 h-16 rounded-xl flex items-center justify-center border border-gray-500/30 group-hover:border-accent transition-colors shadow-lg p-2 mx-auto" 
                                         style="background-color: var(--icon-bg); color: var(--icon-color);">
                                        <!-- Render the SVG directly from the model accessor or helper -->
                                        {!! $ach->icon !!}
                                    </div>
                                    <span class="text-[10px] uppercase font-bold mt-2 opacity-70 truncate w-full text-center block themed-text">{{ $ach->name }}</span>
                                    
                                    <!-- Hover Tooltip -->
                                    <div class="absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-max max-w-[150px] bg-gray-900 text-white text-xs rounded p-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10 shadow-xl border border-gray-700">
                                        <p class="font-bold text-accent mb-1">{{ $ach->name }}</p>
                                        <p class="opacity-80">{{ $ach->description }}</p>
                                    </div>
                                </div>
                            @endforeach
                            
                            @if($achievements->isEmpty())
                                <div class="col-span-full text-center py-8 opacity-40">
                                    <p class="themed-text">Trophy case empty.</p>
                                </div>
                            @endif
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </main>

    @include('users.partials.achievement')

</body>
</html>